  openapi: 3.0.1
  info:
    title: Text Summarization
    description: |+
    Summarises the input text. Only handle up to 512 subword tokens. If too long, model will truncate the text automatically.
    version: '0.1.0'
    x-subscribelink: text_summarization
  servers:
    - url: 'https://dev-apis.sentient.io'
  tags:
  - name: "v0.1.0"
    description: "Published Date - Apr 05, 2021"
  paths:
    /microservices/nlp/textsummarization/v0/getpredictions:
      post:
        tags:
          - v0.1.0
        responses:
          '200':
            description: Ok
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/success'
                example: {
                  "message": "Successfully Processed",
                  "results": {
                      "output": [
                          {
                              "score": 2.14511174780278,
                              "text": "50 per cent of residents have moved into their new homes in alkaff lakeview , singapore . this is despite bidadari 's past as a grave site , with some drawing similarities between the estate and the alks ."
                          },
                          {
                              "score": 1.9220186222187634,
                              "text": "the ministry of defence said the 39-year-old had a cardiac arrest on the way . he was conscious and taken to national university hospital in singapore . ambulance arrived at n.50am at 6.10 am , pronounced dead at ."
                          }
                      ]
                  },
                  "status": "Success"
              }

          '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/unauthorized'
          '402':
            description: Payment Required
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/paymentrequired'
          '403':
            description: Forbidden
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/forbidden'
          '404':
            description: Not Found
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/notfound'
          '419':
            description: Input Field Missing
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/inputfieldmissing'
          '413':
            description: Payload Too Large
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/inputlimitexceeded'
          '415':
            description: Unsupported Media Type
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/invalidinput'
          '500':
            description: Internal Server Error
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/servererror'
          '504':
            description: Gateway Timeout
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/gatewaytimeout'
        security:
          - APIAuthorizer: []
        requestBody:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/input'
          required: true
  components:
    schemas:
      success:
        type: object
        properties: 
          results:
            type: object
            example: { "<Json": "Object>" }
            description: Json Object of returned results
            properties:
              output:
                x-name: output
                type: array
                example: [
                  {
                      "score": 2.14511174780278,
                      "text": "50 per cent of residents have moved into their new homes in alkaff lakeview , singapore . this is despite bidadari 's past as a grave site , with some drawing similarities between the estate and the alks ."
                  },
                  {
                      "score": 1.9220186222187634,
                      "text": "the ministry of defence said the 39-year-old had a cardiac arrest on the way . he was conscious and taken to national university hospital in singapore . ambulance arrived at n.50am at 6.10 am , pronounced dead at ."
                  }
              ]
                description: List of dictionaries containing summarized texts and their confidence score   
                items:
                  oneOf:
                    - type: object
                      properties:
                        score:
                          type: number
                          example: 2.2100781633414535
                          description: Confidence score
                        text:
                          type: string
                          example: more than 2,000 build-to-orders have been completed by the hdb in 2015. more than 70 per cent of residents have moved into their new homes in alk by 50 per cent in bidadari .y greenrise will be the last bto to be
                          description: Summarized text
              

          message:
            type: string
            example: Successfully Processed
            description: Detail description on the API status
          status:
            type: string
            example: Success
            description: The status of the API call success/failure                  
      unauthorized:
        type: object
        properties:
          message:
            type: string
            example: Missing Authentication Token
          status:
            type: string
            example: Failure
      forbidden:
        type: object
        properties:
          message:
            type: string
            example: Access Denied Unauthorized User
          status:
            type: string
            example: Failure
      paymentrequired:
        type: object
        properties:
          message:
            type: string
            example: Insufficient Credits Kindly Top Up
          status:
            type: string
            example: Failure
      notfound:
        type: object
        properties:
          message:
            type: string
            example: Invalid Request URL
          status:
            type: string
            example: Failure
      invalidinput:
        type: object
        properties:
          message:
            type: string
            example: Invalid input - Error in URL.
          status:
            type: string
            example: Failure
      servererror:
        type: object
        properties:
          message:
            type: string
            example: Internal Server Error
          status:
            type: string
            example: Failure
      gatewaytimeout:
        type: object
        properties:
          message:
            type: string
            example: Request Timeout
          status:
            type: string
            example: Failure
      inputfieldmissing:
        type: object
        properties:
          message:
            type: string
            example: Input Field Missing
          status:
            type: string
            example: Failure
      inputlimitexceeded:
        type: object
        properties:
          message:
            type: string
            example: Input Limit Exceeded
          status:
            type: string
            example: Failure 
      versions:
        type: object
        properties:          
          v0.1.0:
           type: array
           items:
            oneOf:
              - type: string
                example: Published Date - Apr 05, 2021
                description: Initial version release    
      input:
        type: object
        required:
          - text
        properties:
          text:
            x-name: text
            type: array
            default: true
            example: :["More than 2,000 Build-To-Order (BTO) Housing Board flats in Singapore's newest large estate, Bidadari, have been completed, with families progressively moving into their new homes.These flats are spread across three projects - Alkaff Vista,"]
            description: |+
              List of texts
            
    securitySchemes:
      APIAuthorizer:
        type: apiKey
        name: x-api-key
        in: header
        x-amazon-apigateway-authtype: custom
        description: Authentication is done using the x-api-key in the request header
