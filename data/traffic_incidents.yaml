openapi: 3.0.1
info:
  title: Traffic Incidents
  description: |+
    This api returns incidents currently happening on the roads, such as
    Accidents, Vehicle Breakdowns, Road Blocks, Traffic Diversions etc.

  version: '0.2.0'
servers:
  - url: 'https://api.sentient.io'
tags:
- name: "v0.2.0"
  description: "Published Date - Feb 30, 2021"
paths:
   /DaaS/dev/lta/TrafficIncidents:
    get:
      tags:
        - v0.2.0
      parameters:
        - in: query
          name: querystring
          schema:
            type: string
          description: |+
            Simple keyword search for matches in all searchable fields. Keywords separated by spaces will return results containing any of those keywords. For exact phrase match, put entire phrase in double quotes (" ").
            
            If this field is set to null, by default the microservice will return all carparks (within the stated limit), which can be further refined through the filterdata field for more sophisticated queries.
            
          example: BE33
          default: false
      responses:
        '200':
          description: success response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/success'
              example:
                odata.metadata: http://datamall2.mytransport.sg/ltaodataservice/$metadata#IncidentSet
                value:
                - Type: Vehicle breakdown
                  Latitude: 1.3765155261589948
                  Longitude: 103.72976844706339
                  Message: "(24/2)19:01 Vehicle breakdown on KJE (towards BKE) before Sungei Tengah
                    Exit."
                - Type: Vehicle breakdown
                  Latitude: 1.3177093559093849
                  Longitude: 103.84973925377123
                  Message: "(24/2)18:56 Vehicle breakdown on CTE (towards AYE) after Moulmein Rd Exit.
                    Avoid lane 5."
                - Type: Heavy Traffic
                  Latitude: 1.3479754506023685
                  Longitude: 103.73535385312147
                  Message: "(24/2)18:49 Heavy Traffic on PIE (towards Changi Airport) at Jurong Town
                    Hall Exit."
                - Type: Heavy Traffic
                  Latitude: 1.3262023431265177
                  Longitude: 103.9058126592148
                  Message: "(24/2)18:43 Heavy Traffic on PIE (towards Changi Airport) between Paya
                    Lebar Rd and Jalan Eunos."
                - Type: Accident
                  Latitude: 1.3506439481672337
                  Longitude: 103.87326241750307
                  Message: "(24/2)18:42 Accident on Serangoon Central (towards Serangoon Central Drive)
                    after Upper Serangoon Road. Avoid left lane."
                - Type: Heavy Traffic
                  Latitude: 1.3244681744648545
                  Longitude: 103.87199555510936
                  Message: "(24/2)18:39 Heavy Traffic on PIE (towards Tuas) between Paya Lebar Rd
                    and KPE Exit."
                - Type: Heavy Traffic
                  Latitude: 1.423537423894956
                  Longitude: 103.79376756753699
                  Message: "(24/2)18:37 Heavy Traffic on SLE (towards CTE) at Woodlands Ave 12 Exit."
                - Type: Heavy Traffic
                  Latitude: 1.421704848057889
                  Longitude: 103.79589714886528
                  Message: "(24/2)18:36 Heavy Traffic on SLE (towards BKE) at Woodlands Ave 12 Exit."
                - Type: Heavy Traffic
                  Latitude: 1.4189908586972941
                  Longitude: 103.7708046525311
                  Message: "(24/2)18:13 Heavy Traffic on BKE (towards Woodlands) at SLE Exit."
                - Type: Heavy Traffic
                  Latitude: 1.3246268590009196
                  Longitude: 103.872267738438
                  Message: "(24/2)18:06 Heavy Traffic on PIE (towards Changi Airport) at KPE Exit."
                - Type: Heavy Traffic
                  Latitude: 1.2838074370179324
                  Longitude: 103.8066088698767
                  Message: "(24/2)18:03 Heavy Traffic on AYE (towards MCE) between Buona Vista Exit
                    and Alexandra."
                - Type: Vehicle breakdown
                  Latitude: 1.2990111766105807
                  Longitude: 103.90254595653626
                  Message: "(24/2)18:02 Vehicle breakdown on ECP (towards Changi Airport) before Still
                    Rd Sth Exit. Avoid lane 4."
                - Type: Roadwork
                  Latitude: 1.3497992256482165
                  Longitude: 103.7091860681545
                  Message: "(24/2)17:06 Roadworks on Jurong West Avenue 2 towards Jurong West Street
                    23."
                - Type: Roadwork
                  Latitude: 1.396968671445086
                  Longitude: 103.81851492215516
                  Message: "(24/2)14:11 Roadworks on Upper Thomson Road (towards Newton) after Mandai
                    Road."
                - Type: Roadwork
                  Latitude: 1.3963103220975503
                  Longitude: 103.81860207958121
                  Message: "(24/2)14:09 Roadworks on Upper Thomson Road (towards SLE) after SLE."
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/unauthorized'
        '402':
          description: Payment Required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/paymentrequired'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/forbidden'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/notfound'
        '419':
          description: Input Field Missing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputfieldmissing'
        '420':
          description: Input Limit Exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputlimitexceeded'
        '422':
          description: Invalid Input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/invalidinput'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/servererror'
        '504':
          description: Gateway Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/gatewaytimeout'
      security:
        - APIAuthorizer: []
components:
  schemas:
    success:
      type: object
      properties:
        odata.metadata:
          type: string
          example: http://datamall2.mytransport.sg/ltaodataservice/$metadata#IncidentSet
          description: url
    unauthorized:
      type: object
      properties:
        message:
          type: string
          example: Missing Authentication Token
        status:
          type: string
          example: Failure
    forbidden:
      type: object
      properties:
        message:
          type: string
          example: Access Denied Unauthorized User
        status:
          type: string
          example: Failure
    paymentrequired:
      type: object
      properties:
        message:
          type: string
          example: Insufficient Credits Kindly Top Up
        status:
          type: string
          example: Failure
    notfound:
      type: object
      properties:
        message:
          type: string
          example: Invalid Request URL
        status:
          type: string
          example: Failure
    servererror:
      type: object
      properties:
        message:
          type: string
          example: Internal Server Error
        status:
          type: string
          example: Failure
    gatewaytimeout:
      type: object
      properties:
        message:
          type: string
          example: Request Timeout
        status:
          type: string
          example: Failure
    inputfieldmissing:
      type: object
      properties:
        message:
          type: string
          example: Input Field Missing
        status:
          type: string
          example: Failure
    inputlimitexceeded:
      type: object
      properties:
        message:
          type: string
          example: Input Limit Exceeded
        status:
          type: string
          example: Failure
    invalidinput:
      type: object
      properties:
        message:
          type: string
          example: Invalid Input
        status:
          type: string
          example: Failure
    versions:
      type: object
      properties: 
        v0.1.0:
         type: array
         items:
          oneOf:
            - type: string
              example: Published Date - Feb 30, 2021
              description: Initial version release
  securitySchemes:
    APIAuthorizer:
      type: apiKey
      name: x-api-key
      in: header
      x-amazon-apigateway-authtype: custom
      description: Authentication is done using the x-api-key in the request header.
